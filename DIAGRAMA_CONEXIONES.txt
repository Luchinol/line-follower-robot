================================================================================
   DIAGRAMA DE CONEXIONES - CARRITO SEGUIDOR ESP32-S3 (Config. Simplificada)
================================================================================

┌──────────────────────────────────────────────────────────────────────────┐
│                          VISTA GENERAL DEL SISTEMA                       │
└──────────────────────────────────────────────────────────────────────────┘

                              BATERÍA 7.4V
                                   │
                    ┌──────────────┴──────────────┐
                    │                             │
              ┌─────▼─────┐                       │
              │   L298N   │                       │
              │ Puente H  │                       │
              └─────┬─────┘                       │
                    │ 5V Out                      │
        ┌───────────┴────────────┐                │
        │                        │                │
   ┌────▼────┐              ┌────▼─────┐    ┌────▼─────┐
   │ESP32-S3 │◄─────────────┤ 3xHW-511 │    │  Motores │
   │  WROOM  │              │(Sensores)│    │    DC    │
   │FREENOVE │              └──────────┘    │   (2x)   │
   └─────────┘                              └──────────┘


================================================================================
                      CONEXIONES DEL ESP32-S3 ↔ L298N
================================================================================

    ESP32-S3 WROOM                            L298N
    ==============                            =====

    ┌──────────────────────────────────────────────────────────┐
    │                    MOTOR DERECHO                         │
    └──────────────────────────────────────────────────────────┘
    GPIO 12 ─────────────────────────────►  ENA (Enable A - PWM)
    GPIO 11 ─────────────────────────────►  IN1 (Input 1)
    GPIO 18 ─────────────────────────────►  IN2 (Input 2)

                                             OUT1 ───► Motor Der +
                                             OUT2 ───► Motor Der -

    ┌──────────────────────────────────────────────────────────┐
    │                   MOTOR IZQUIERDO                        │
    └──────────────────────────────────────────────────────────┘
    GPIO 13 ─────────────────────────────►  ENB (Enable B - PWM)
    GPIO 14 ─────────────────────────────►  IN3 (Input 3)
    GPIO 21 ─────────────────────────────►  IN4 (Input 4)

    ┌──────────────────────────────────────────────────────────┐
    │                   ALIMENTACIÓN                           │
    └──────────────────────────────────────────────────────────┘
    GND ─────────────────────────────────►  GND (Común)

                                             +12V ◄─── Batería 7.4V
                                             +5V  ───► ESP32 VIN
                                             GND  ───► ESP32 GND


================================================================================
                  CONEXIONES DEL ESP32-S3 ↔ SENSORES IR
================================================================================

┌──────────────────────────────────────────────────────────────────────────┐
│          ARRAY COMPLETO (5 SENSORES) - 5x HW-511 individuales           │
│                    Configuración actual del proyecto                     │
└──────────────────────────────────────────────────────────────────────────┘

    ESP32-S3       Sensor    Posición             Peso    Tipo ADC
    ════════       ══════    ════════             ════    ════════
    GPIO 6  ──────► SENSOR  (Extremo Izquierdo)    -5     ADC1_CH5 ✅
    GPIO 5  ──────► SENSOR  (Izquierdo)            -1     ADC1_CH4 ✅
    GPIO 4  ──────► SENSOR  (Centro)                0     ADC1_CH3 ✅
    GPIO 8  ──────► SENSOR  (Derecho)              +1     ADC1_CH7 ✅
    GPIO 7  ──────► SENSOR  (Extremo Derecho)      +5     ADC1_CH6 ✅

                       Cada sensor HW-511:
                       ┌──────────────┐
                       │   HW-511     │
                 VCC ──┤ 1     4 ├── A0 (Analógico) → ESP32-S3
                 GND ──┤ 2     3 ├── D0 (Digital, no usado)
                       └────────────┘

    ALIMENTACIÓN DE SENSORES:
    ═════════════════════════
    Todos los sensores (5x HW-511):
        VCC ◄─── L298N 5V o ESP32 5V
        GND ◄─── GND común
        A0  ───► GPIO correspondiente ESP32-S3


================================================================================
                        DISPOSICIÓN FÍSICA EN EL CHASIS
================================================================================

                            FRENTE DEL ROBOT
                                  ↑
                                  │
    ┌─────────────────────────────────────────────────────────┐
    │                                                         │
    │         Array de Sensores (5x HW-511)                   │
    │    ┌───┐   ┌───┐   ┌───┐   ┌───┐   ┌───┐            │
    │    │ S │   │ S │   │ S │   │ S │   │ S │            │
    │    └───┘   └───┘   └───┘   └───┘   └───┘            │
    │    GPIO6   GPIO5   GPIO4   GPIO8   GPIO7             │
    │     -5      -1       0      +1      +5   ← Pesos    │
    │                                                         │
    │                ┌───────────────┐                       │
    │                │  ESP32-S3     │                       │
    │                └───────────────┘                       │
    │                                                         │
    │              ┌──────────┐                              │
    │              │  L298N   │                              │
    │              └──────────┘                              │
    │                                                         │
    │     ┌────────┐                    ┌────────┐           │
    │     │ Motor  │                    │ Motor  │           │
    │     │  Izq   │                    │  Der   │           │
    │     └───┬────┘                    └───┬────┘           │
    │         │                             │                │
    │        ⚪                            ⚪               │
    │      Rueda                          Rueda             │
    │       Izq                            Der              │
    └─────────────────────────────────────────────────────────┘

    DIMENSIONES SUGERIDAS:
    ─────────────────────
    • Ancho del chasis: 15-20 cm
    • Altura sensores sobre pista: 2-10 mm (5 mm es un buen inicio)
    • Separación entre sensores: 1.5 - 2.0 cm (depende del ancho de la línea)


================================================================================
                        CHECKLIST DE CONEXIONES
================================================================================

□ MOTORES L298N:
  □ GPIO 12 → ENA (PWM Motor Derecho)
  □ GPIO 11 → IN1 (Dirección Motor Derecho)
  □ GPIO 18 → IN2 (Dirección Motor Derecho)
  □ GPIO 13 → ENB (PWM Motor Izquierdo)
  □ GPIO 14 → IN3 (Dirección Motor Izquierdo)
  □ GPIO 21 → IN4 (Dirección Motor Izquierdo)

□ SENSORES IR (5x HW-511):
  □ GPIO 6  → Sensor Extremo Izquierdo (A0)
  □ GPIO 5  → Sensor Izquierdo (A0)
  □ GPIO 4  → Sensor Central (A0)
  □ GPIO 8  → Sensor Derecho (A0)
  □ GPIO 7  → Sensor Extremo Derecho (A0)

□ ALIMENTACIÓN:
  □ Batería 7.4V → L298N (+12V)
  □ L298N (+5V) → ESP32 VIN (Opcional, puede usar USB)
  □ L298N (+5V) → Sensores IR VCC (todos)
  □ GND común conectado a: ESP32, L298N, sensores, batería.

================================================================================
Versión: 2.0.1
Fecha: 2025-11-11
Autor: LUCHIN-OPRESORCL (Luchinol)
================================================================================